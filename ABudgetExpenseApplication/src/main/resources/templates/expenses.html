	<!DOCTYPE html>
	<html  xmlns:th="http://www.thymeleaf.org">
	<head>
	<meta charset="ISO-8859-1">
	<title>Expense list  </title>
	  <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css" />
	    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
	    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
	      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
   
	<title>Sum Total for Column in jQuery </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
  
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"> </script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"> </script>
<script src="https://cdn.datatables.net/searchpanes/2.0.0/js/dataTables.searchPanes.min.js"> </script>
<script src="https://cdn.datatables.net/select/1.3.4/js/dataTables.select.min.js"> </script>
<script src="https://code.highcharts.com/highcharts.js"> </script>



    
    <script>
        $(document).ready(function() {
            $('table thead th').each(function(i=2) {
                calculateColumn(2);
            });
        });

        function calculateColumn(index) {
            var total = 0;
            $('table tr').each(function() {
                var value = parseFloat($('td', this).eq(index).text());
                if (!isNaN(value)) {
                    total += value;
                }
            });
            $('table tfoot td').eq(index).text('Total: ' + total);
            console.log(total);
            document.getElementById("val").innerHTML = "You have spent  $" + total + " " + " in total";
        }
    </script>
    
  <!--  <script>
    $(document).ready(function() {
    $('#table').DataTable();
    } ); 
</script>-->
	
	<!-- <script>
				var table = document.getElementById("table"), sumVal = 0;
				for (var i = 1; i < table.rows.length; i++)
				 {
					sumVal = sumVal + parseInt(table.rows[i]).cell[6].innerHTML;	
				}
				document.getElementById("val").innerHTML = "Total = " + sumVal;
				console.log(sumVal);
			</script> -->
	</head>
	
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<div class="container-fluid">
		<a class="navbar-brand" href="http://localhost:8080/list_users">SpenDi</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">

				<li class="nav-item">
					<a class="nav-link" href="#">Manage</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
						data-bs-toggle="dropdown" aria-expanded="false">

					</a>
					<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
						<li><a th:href="@{/users}">List Users</a></li>
						<li><a th:href="@{/login}">Login</a></li>
						<li><a th:href="@{/register}">Register</a></li>
						<li> <a th:href="@{/users/new}">Create Users</a></li>
						<li> <a th:href="@{/users/new}">Create Users</a></li>
						<li> <a th:href="@{/categories}">Categories</a></li>
						<li><a th:href="@{/category/new}">Create Category</a> </li>
						<li> <a th:href="@{/expenses}">List Of enxpense</a></li>
						<li><a th:href="@{/expense/new}">Add expense</a></li>


					</ul>
				</li>
				<li class="nav-item">
					<a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
				</li>
			</ul>
			<!--<form class="d-flex">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success" type="submit">Search</button>
			</form>-->
		</div>
	</div>
</nav>
	<body>

	<h2 id= "val" style = " text-align: center"> This is your money </h2 >	
	<div class="container text-center">
		<div><h1>Expense List</h1></div>
	 &nbsp;
		
	<div>
	<table id = "table">
	<thead class"thead-dark">
	<tr>
	<th>ID</th>
	<th>Expense Date</th>
	<th>Expense Amount</th>
	<th>Category</th>
	<th>Expense Note</th>
	<th>Action</th>
	</tr>
	</thead>
	<!-- work -->
	<tbody>
	<tr th:each="expense : ${listExpenses}">
	<td th:text="${expense.id}"></td>
	<td th:text="${expense.expenseDate}"></td>
	<td th:text="${expense.expenseAmount}"></td>
	<td th:text="${expense.category.name}"></td>
	<td th:text="${expense.expenseNote}"></td>
	<td>
		<a th:href="@{'/expenses/edit/' + ${expense.id}}">Edit</a> 
		&nbsp;
		&nbsp;
	<a th:href="@{'/expenses/delete/' + ${expense.id}}">Delete</a> </td>
	</tr>
	</tbody>
	</table>
	    </div>
	</div>
<!--
	<span id= "val"> This is your money </span>	-->
	&nbsp;
	&nbsp;
	&nbsp;
	&nbsp;
	&nbsp;
	&nbsp;
	 <p style ="color:blue; font-size: 20px; left: 0; bottom: 0; position: center;  text-align: center;"><a th:href="@{/expense/new}">Create another expense</a></p>


	
	<!---->
	
	<script>
	
	
 $(document).ready(function () {
    // Create DataTable
    var table = $('#table').DataTable({
      //  dom: 'Pfrtip',
    });
 
    // Create the chart with initial data
    var container = $('<div/>').insertBefore(table.table().container());
 
    var chart = Highcharts.chart(container[0], {
        chart: {
            type: 'pie',
        },
        title: {
            text: 'Categories Spending',
        },
        series: [
            {
                data: chartData(table),
            },
        ],
    });
 
    // On each draw, update the data in the chart
    table.on('draw', function () {
        chart.series[0].setData(chartData(table));
    });
});
 
function chartData(table) {
    var counts = {};
 
    // Count the number of entries for each position
    table
        .column(3, { search: 'applied' })
        .data()
        .each(function (val) {
            if (counts[val]) {
                counts[val] += 1;
            } else {
                counts[val] = 1;
            }
        });
 
    // And map it to the format highcharts uses
    return $.map(counts, function (val, key) {
        return {
            name: key,
            y: val,
        };
    });
}
	
	 </script>
	<!---->

	</body>
	</html>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
